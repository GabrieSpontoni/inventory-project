{"version":3,"sources":["app/components/management/release-access/componentsTableReleaseAccess/TableEmploye.js","app/components/management/release-access/componentsTableReleaseAccess/TableAdm.js","app/components/management/release-access/TableReleaseAccess.js","app/management/ReleaseAccess.js"],"names":["TableEmploye","useState","data","setData","user","setUser","useEffect","dbRef","firebase","database","ref","child","get","then","snapshot","exists","val","console","log","catch","error","auth","onAuthStateChanged","uid","className","Object","keys","reverse","slice","map","id","tipo_atual","tipo_requisicao","key","nome","email","type","onClick","postData","data_criacao","hora_criacao","id_filial","update","window","location","reload","toast","theme","handleAccepted","limit","TableAdm","TableManagement","React","isMounted","ReleaseAccess","aria-label","href","event","preventDefault","aria-current","Component"],"mappings":"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","file":"static/js/21.98e7469e.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport firebase from \"firebase/app\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport function TableEmploye() {\n  const [data, setData] = useState({});\n  const [user, setUser] = useState({});\n\n  useEffect(() => {\n    let isMounted = true;\n    //pegar todos usuários e colocar em data\n    const dbRef = firebase.database().ref();\n    dbRef\n      .child(`/usuarios`)\n      .get()\n      .then((snapshot) => {\n        if (isMounted) {\n          if (snapshot.exists()) {\n            // console.log(snapshot.val());\n            setData({ ...snapshot.val() });\n          } else {\n            console.log(\"No data available\");\n            setData({});\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n    //pegar usuário atual e colocar em user\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        dbRef\n          .child(`usuarios/${user.uid}`)\n          .get()\n          .then((snapshot) => {\n            if (isMounted) {\n              if (snapshot.exists()) {\n                setUser({ ...snapshot.val() });\n              } else {\n                console.log(\"No data available\");\n                setUser({});\n              }\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      } else {\n        console.log(\"no user\");\n      }\n    });\n\n    return () => {\n      setData({});\n      setUser({});\n    };\n  }, []);\n\n  const handleAccepted = (data, id) => {\n    var postData = {\n      data_criacao: data.data_criacao,\n      email: data.email,\n      hora_criacao: data.hora_criacao,\n      id_filial: data.id_filial,\n      nome: data.nome,\n      //tipo_atual será o único atributo mudado no banco\n      tipo_atual: data.tipo_requisicao,\n      tipo_requisicao: data.tipo_requisicao,\n    };\n    var update = {};\n    update[\"usuarios/\" + id] = postData;\n    // console.log(data);\n    // console.log(id);\n    firebase\n      .database()\n      .ref()\n      .update(update)\n      .then(() => {\n        window.location.reload();\n      })\n      .catch(() => {\n        toast.error(\"Algo deu errado\", {\n          theme: \"dark\",\n        });\n      });\n  };\n\n  const handleRefused = (data, id) => {\n    console.log(user);\n  };\n  return (\n    <div className=\"row \">\n      <div className=\"col-12 grid-margin\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h4>Solicitações de acesso (colaboradores)</h4>\n\n            {user && (\n              <div className=\"table-responsive\">\n                <table className=\"table\">\n                  <thead>\n                    <tr>\n                      <th> Nome do Funcionário </th>\n                      <th> Tipo de requisição </th>\n                      <th> Email </th>\n                      <th> </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {Object.keys(data)\n                      .reverse()\n                      .slice()\n                      .map((id) => {\n                        if (\n                          data[id].tipo_atual === \"novo\" &&\n                          data[id].tipo_requisicao === \"colaborador\"\n                        ) {\n                          return (\n                            <tr key={id}>\n                              <td> {data[id].nome} </td>\n                              <td> {data[id].tipo_requisicao} </td>\n                              <td> {data[id].email} </td>\n                              <td>\n                                <div className=\"template-demo\">\n                                  <button\n                                    type=\"button\"\n                                    className=\"btn btn-outline-success btn-fw\"\n                                    onClick={() => handleAccepted(data[id], id)}\n                                  >\n                                    Aceitar\n                                  </button>\n                                  <button\n                                    type=\"button\"\n                                    className=\"btn btn-outline-danger btn-fw\"\n                                    onClick={() => handleRefused(data[id], id)}\n                                  >\n                                    Recusar\n                                  </button>\n                                  <ToastContainer limit={3} />\n                                </div>\n                              </td>\n                            </tr>\n                          );\n                        } else {\n                          return null;\n                        }\n                      })}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport firebase from \"firebase/app\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport function TableAdm() {\n  const [data, setData] = useState({});\n  const [user, setUser] = useState({});\n\n  useEffect(() => {\n    let isMounted = true;\n    //pegar todos usuários e colocar em data\n    const dbRef = firebase.database().ref();\n    dbRef\n      .child(`/usuarios`)\n      .get()\n      .then((snapshot) => {\n        if (isMounted) {\n          if (snapshot.exists()) {\n            // console.log(snapshot.val());\n            setData({ ...snapshot.val() });\n          } else {\n            console.log(\"No data available\");\n            setData({});\n          }\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n    //pegar usuário atual e colocar em user\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        dbRef\n          .child(`usuarios/${user.uid}`)\n          .get()\n          .then((snapshot) => {\n            if (isMounted) {\n              if (snapshot.exists()) {\n                setUser({ ...snapshot.val() });\n              } else {\n                console.log(\"No data available\");\n                setUser({});\n              }\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      } else {\n        console.log(\"no user\");\n      }\n    });\n\n    return () => {\n      setData({});\n      setUser({});\n    };\n  }, []);\n\n  const handleAccepted = (data, id) => {\n    var postData = {\n      data_criacao: data.data_criacao,\n      email: data.email,\n      hora_criacao: data.hora_criacao,\n      id_filial: data.id_filial,\n      nome: data.nome,\n      //tipo_atual será o único atributo mudado no banco\n      tipo_atual: data.tipo_requisicao,\n      tipo_requisicao: data.tipo_requisicao,\n    };\n    var update = {};\n    update[\"usuarios/\" + id] = postData;\n    // console.log(data);\n    // console.log(id);\n    firebase\n      .database()\n      .ref()\n      .update(update)\n      .then(() => {\n        window.location.reload();\n      })\n      .catch(() => {\n        toast.error(\"Algo deu errado\", {\n          theme: \"dark\",\n        });\n      });\n  };\n\n  const handleRefused = (data, id) => {\n    console.log(user);\n  };\n  return (\n    <div className=\"row \">\n      <div className=\"col-12 grid-margin\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <h4>Solicitações de acesso (administradores)</h4>\n\n            <div className=\"table-responsive\">\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th> Nome do Funcionário </th>\n                    <th> Tipo de requisição </th>\n                    <th> Email </th>\n                    <th> </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {Object.keys(data)\n                    .reverse()\n                    .slice()\n                    .map((id) => {\n                      if (\n                        data[id].tipo_atual === \"novo\" &&\n                        data[id].tipo_requisicao === \"administrador\"\n                      ) {\n                        return (\n                          <tr key={id}>\n                            <td> {data[id].nome} </td>\n                            <td> {data[id].tipo_requisicao} </td>\n                            <td> {data[id].email} </td>\n                            <td>\n                              <div className=\"template-demo\">\n                                <button\n                                  type=\"button\"\n                                  className=\"btn btn-outline-success btn-fw\"\n                                  onClick={() => handleAccepted(data[id], id)}\n                                >\n                                  Aceitar\n                                </button>\n                                <button\n                                  type=\"button\"\n                                  className=\"btn btn-outline-danger btn-fw\"\n                                  onClick={() => handleRefused(data[id], id)}\n                                >\n                                  Recusar\n                                </button>\n                                <ToastContainer limit={3} />\n                              </div>\n                            </td>\n                          </tr>\n                        );\n                      } else {\n                        return null;\n                      }\n                    })}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\n\nimport { TableEmploye } from \"./componentsTableReleaseAccess/TableEmploye\";\nimport { TableAdm } from \"./componentsTableReleaseAccess/TableAdm\";\n\nimport firebase from \"firebase/app\";\n\nfunction TableManagement() {\n  const [user, setUser] = React.useState(null);\n\n  useEffect(() => {\n    const dbRef = firebase.database().ref();\n    let isMounted = true;\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        dbRef\n          .child(`usuarios/${user.uid}`)\n          .get()\n          .then((snapshot) => {\n            if (isMounted) {\n              if (snapshot.exists()) {\n                setUser({ ...snapshot.val() });\n              } else {\n                console.log(\"No data available\");\n                setUser({});\n              }\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      } else {\n        console.log(\"no user\");\n      }\n    });\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  return (\n    <div>\n      {user &&\n        (user.tipo_atual === \"administrador\" ||\n          user.tipo_atual === \"diretor\" ||\n          user.tipo_atual === \"dev\") && <TableEmploye />}\n      {user && (user.tipo_atual === \"diretor\" || user.tipo_atual === \"dev\") && (\n        <TableAdm />\n      )}\n    </div>\n  );\n}\n\nexport default TableManagement;\n","import React, { Component } from \"react\";\nimport TableManagement from \"../components/management/release-access/TableReleaseAccess\";\n\nexport class ReleaseAccess extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"page-header\">\n          <h3 className=\"page-title\"> Liberar acessos </h3>\n          <nav aria-label=\"breadcrumb\">\n            <ol className=\"breadcrumb\">\n              <li className=\"breadcrumb-item\">\n                <a href=\"!#\" onClick={(event) => event.preventDefault()}>\n                  Administração\n                </a>\n              </li>\n              <li className=\"breadcrumb-item active\" aria-current=\"page\">\n                Liberar acessos\n              </li>\n            </ol>\n          </nav>\n        </div>\n\n        <TableManagement />\n      </div>\n    );\n  }\n}\n\nexport default ReleaseAccess;\n"],"sourceRoot":""}